<div class="auth-wrapper d-flex align-items-center justify-content-center">
  <div class="admin-card shadow p-2 rounded-4 bg-light text-dark w-100" style="max-width:1200px;">
    <h2 class="text-center mb-2 fw-bold text-dark" style="font-size:1.6rem;">Admin Dashboard</h2>

    <h4 class="mt-3 mb-2" style="font-size:1.2rem;">Product Management</h4>
    <button class="btn btn-primary btn-sm mb-2" (click)="showAddProductForm = !showAddProductForm">Add Product</button>
    <div *ngIf="showAddProductForm" class="mb-3">
      <form (ngSubmit)="addProduct()" class="row g-2">
        <div class="col-12 col-md-3">
          <input type="text" class="form-control" [(ngModel)]="newProduct.name" name="name" placeholder="Name" required>
        </div>
        <div class="col-12 col-md-2">
          <input type="number" class="form-control" [(ngModel)]="newProduct.price" name="price" placeholder="Price" required>
        </div>
        <div class="col-12 col-md-3">
          <input type="number" class="form-control" [(ngModel)]="newProduct.category_id" name="category_id" placeholder="Category ID" required>
        </div>
        <div class="col-12 col-md-2">
          <input type="text" class="form-control" [(ngModel)]="newProduct.image_url" name="image_url" placeholder="Image URL" required>
        </div>
        <div class="col-12 col-md-2">
          <input type="number" class="form-control" [(ngModel)]="newProduct.rating" name="rating" placeholder="Rating" required>
        </div>
        <div class="col-12 col-md-2">
          <input type="number" class="form-control" [(ngModel)]="newProduct.reviews_count" name="reviews_count" placeholder="Reviews Count" required>
        </div>
        <div class="col-12 col-md-3">
          <input type="text" class="form-control" [(ngModel)]="newProduct.description" name="description" placeholder="Description" required>
        </div>
        <div class="col-12 col-md-3">
          <input type="text" class="form-control" [(ngModel)]="newProduct.manufacturer" name="manufacturer" placeholder="Manufacturer" required>
        </div>
        <div class="col-12 col-md-3">
          <input type="text" class="form-control" [(ngModel)]="newProduct.model_number" name="model_number" placeholder="Model Number" required>
        </div>
        <div class="col-12 col-md-6">
          <textarea class="form-control" [(ngModel)]="newProduct.full_description" name="full_description" placeholder="Full Description" required></textarea>
        </div>
        <div class="col-12 col-md-6">
          <textarea class="form-control" [(ngModel)]="newProduct.specifications_json" name="specifications_json" placeholder="Specifications" required></textarea>
        </div>
        <div class="col-12">
          <button type="submit" class="btn btn-success btn-sm w-100">Add</button>
        </div>
      </form>
    </div>
    <div class="table-responsive">
      <table class="table table-sm">
        <thead>
          <tr>
            <th>Name</th>
            <th>Price</th>
            <th>Category</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products">
            <td *ngIf="!isEditingProduct || editingProduct.id !== product.id">{{ product.name }}</td>
            <td *ngIf="!isEditingProduct || editingProduct.id !== product.id">{{ product.price | currency }}</td>
            <td *ngIf="!isEditingProduct || editingProduct.id !== product.id">{{ getCategoryName(product.category_id) }}</td>
            <td *ngIf="!isEditingProduct || editingProduct.id !== product.id">
              <button class="btn btn-warning btn-sm me-1" (click)="editProduct(product)">Edit</button>
              <button class="btn btn-danger btn-sm" (click)="deleteProduct(product.id)">Delete</button>
            </td>
            <td *ngIf="isEditingProduct && editingProduct.id === product.id" colspan="4">
              <form (ngSubmit)="saveProductEdit()" class="row g-2">
                <div class="col-12 col-md-3">
                  <input type="text" class="form-control" [(ngModel)]="editingProduct.name" name="editName" placeholder="Name" required>
                </div>
                <div class="col-12 col-md-2">
                  <input type="number" class="form-control" [(ngModel)]="editingProduct.price" name="editPrice" placeholder="Price" required>
                </div>
                <div class="col-12 col-md-3">
                  <input type="number" class="form-control" [(ngModel)]="editingProduct.category_id" name="editCategory" placeholder="Category ID" required>
                </div>
                <div class="col-12 col-md-2">
                  <input type="text" class="form-control" [(ngModel)]="editingProduct.image_url" name="editImage" placeholder="Image URL" required>
                </div>
                <div class="col-12 col-md-2">
                  <input type="number" class="form-control" [(ngModel)]="editingProduct.rating" name="editRating" placeholder="Rating" required>
                </div>
                <div class="col-12 col-md-2">
                  <input type="number" class="form-control" [(ngModel)]="editingProduct.reviews_count" name="editReviews" placeholder="Reviews Count" required>
                </div>
                <div class="col-12 col-md-3">
                  <input type="text" class="form-control" [(ngModel)]="editingProduct.description" name="editDesc" placeholder="Description" required>
                </div>
                <div class="col-12 col-md-3">
                  <input type="text" class="form-control" [(ngModel)]="editingProduct.manufacturer" name="editManufacturer" placeholder="Manufacturer" required>
                </div>
                <div class="col-12 col-md-3">
                  <input type="text" class="form-control" [(ngModel)]="editingProduct.model_number" name="editModel" placeholder="Model Number" required>
                </div>
                <div class="col-12 col-md-6">
                  <textarea class="form-control" [(ngModel)]="editingProduct.full_description" name="editFullDesc" placeholder="Full Description" required></textarea>
                </div>
                <div class="col-12 col-md-6">
                  <textarea class="form-control" [(ngModel)]="editingProduct.specifications_json" name="editSpecs" placeholder="Specifications JSON" required></textarea>
                </div>
                <div class="col-12">
                  <button type="submit" class="btn btn-success btn-sm me-1">Save</button>
                  <button type="button" class="btn btn-secondary btn-sm" (click)="cancelProductEdit()">Cancel</button>
                </div>
              </form>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    
    <h4 class="mt-3 mb-2" style="font-size:1.2rem;">Category Management</h4>
    <button class="btn btn-primary btn-sm mb-2" (click)="showAddCategoryForm = !showAddCategoryForm">Add Category</button>
    <div *ngIf="showAddCategoryForm" class="mb-3">
      <form (ngSubmit)="addCategory()" class="row g-2">
        <div class="col-12 col-md-4">
          <input type="text" class="form-control" [(ngModel)]="newCategory.category_name" name="category_name" placeholder="Category Name" required>
        </div>
        <div class="col-12 col-md-4">
          <input type="text" class="form-control" [(ngModel)]="newCategory.description" name="description" placeholder="Description" required>
        </div>
        <div class="col-12 col-md-4">
          <input type="text" class="form-control" [(ngModel)]="newCategory.icon" name="icon" placeholder="Icon" required>
        </div>
        <div class="col-12">
          <button type="submit" class="btn btn-success btn-sm w-100">Add</button>
        </div>
      </form>
    </div>
    <div class="table-responsive">
      <table class="table table-sm">
        <thead>
          <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Icon</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let category of categories">
            <td *ngIf="!isEditingCategory || editingCategory.id !== category.id">{{ category.category_name }}</td>
            <td *ngIf="!isEditingCategory || editingCategory.id !== category.id">{{ category.description }}</td>
            <td *ngIf="!isEditingCategory || editingCategory.id !== category.id">{{ category.icon }}</td>
            <td *ngIf="!isEditingCategory || editingCategory.id !== category.id">
              <button class="btn btn-warning btn-sm me-1" (click)="editCategory(category)">Edit</button>
              <button class="btn btn-danger btn-sm" (click)="deleteCategory(category.id)">Delete</button>
            </td>
            <td *ngIf="isEditingCategory && editingCategory.id === category.id" colspan="4">
              <form (ngSubmit)="saveCategoryEdit()" class="row g-2">
                <div class="col-12 col-md-3">
                  <input type="text" class="form-control" [(ngModel)]="editingCategory.category_name" name="editName" placeholder="Category Name" required>
                </div>
                <div class="col-12 col-md-3">
                  <input type="text" class="form-control" [(ngModel)]="editingCategory.description" name="editDesc" placeholder="Description" required>
                </div>
                <div class="col-12 col-md-3">
                  <input type="text" class="form-control" [(ngModel)]="editingCategory.icon" name="editIcon" placeholder="Icon" required>
                </div>
                <div class="col-12 col-md-3">
                  <button type="submit" class="btn btn-success btn-sm me-1">Save</button>
                  <button type="button" class="btn btn-secondary btn-sm" (click)="cancelCategoryEdit()">Cancel</button>
                </div>
              </form>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  
  </div>
</div>
